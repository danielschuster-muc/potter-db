import { useSSG } from "nextra/ssg";

import { Callout } from "nextra-theme-docs";

import graphqlFetcher from "../lib/fetchers/graphqlFetcher";

export const getStaticProps = async ({ params }) => {
  const query = `
    {
      books {
        totalCount
      }
      characters {
        totalCount
      }
      spells {
        totalCount
      }
      potions {
        totalCount
      }
      movies {
        totalCount
      }
    }
  `;
  const result = await graphqlFetcher(query);
  const mapped_result = result?.data;
  let hash = {};
  for (let k in mapped_result) {
    hash["total_" + k] = mapped_result[k]?.totalCount;
  }
  return {
    props: {
      ssg: hash,
    },
  };
};

export const Stats = () => {
  const {
    total_books,
    total_characters,
    total_spells,
    total_potions,
    total_movies,
  } = useSSG();
  return (
    <table>
      <tbody>
        <tr>
          <td>Books</td>
          <td>{total_books}</td>
        </tr>
        <tr>
          <td>Characters</td>
          <td>{total_characters}</td>
        </tr>
        <tr>
          <td>Movies</td>
          <td>{total_movies}</td>
        </tr>
        <tr>
          <td>Potions</td>
          <td>{total_potions}</td>
        </tr>
        <tr>
          <td>Spells</td>
          <td>{total_spells}</td>
        </tr>
      </tbody>
    </table>
  );
};

# Intro

Bem-vindo (a) à documentação de **Potter DB: API**!
Mergulhe no mundo mágico de Harry Potter com acesso a personagens, livros, feitiços e muito mais. 
Se você é um desenvolvedor criando um aplicativo com o tema Harry Potter ou apenas um fã de curiosidades, essa documentação irá guiá-lo através dos segredos de nossa API.

## O que é Potter DB: API?
Potter DB: API é uma interface baseada em REST e GraphQL para um vasto repositório de dados do mundo mágico de Harry Potter. Cuidamos dos dados para que você possa se concentrar na construção do seu aplicativo. Com esta API, você pode:
- Recuperar informações detalhadas sobre seus amados `personagens`, incluindo seus backgrounds, casa de afiliação e muito mais.
- Explorar uma lista abrangente de `feitiços`e `poções`usadas no mundo mágico.
- Obter detalhes completos sobre os `livros`e `filmes`do universo Harry Potter.

## Statistics
<Stats />
